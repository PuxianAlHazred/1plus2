<template>
<div id="parallax" data-image-src="https://electrobotik.netlify.com/images/fondfestival.jpg">

  <nuxt-link to="/" class="header-link" ><img id="logo" class="partenaires" src="https://electrobotik.netlify.com/images/logo.svg"  alt="logo"></nuxt-link>
  <nuxt-link to="/" class="header-link" ><img class="small-logo partenaires" src="https://electrobotik.netlify.com/images/logo-horizontal.svg" alt="logo"></nuxt-link>
  <div class="container-grid scene_element scene_element--fadein">
          <div class="background"></div>
          <h2>PARTENAIRES</h2>
          <div class="content">
            <div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href="https://www.circuitpaulricard.com/"><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/1.jpg'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href="https://www.nrj.fr/frequences-nrj/marseille"><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/2.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href="https://mixmag.fr/"><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/3.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href="https://www.tsugi.fr/"><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/4.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href="http://fr.traxmag.com/article/42283-marseille-les-maitres-du-hardcore-reunis-pour-une-soiree-de-soutien-au-festival-electrobotik-invasion"><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/5.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/6.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/7.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/8.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/9.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/10.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/11.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/12.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/13.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/14.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/15.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/16.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/17.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/18.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/19.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/20.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire sneaky-partenaire">
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/21.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div><!--
            --><div class="partenaire sneaky-partenaire-impaire">
            </div><!--
            --><div class="partenaire">
                <div class="effect">
                    <div class="volet1">
                        <a target="_blank" href=""><img class="lazy" v-lazy="'https://electrobotik.netlify.com/images/logos/22.png'"></a>
                    </div>
                    <div class="volet2"></div>
                </div>
            </div>

          </div>
        </div>
   </div>     
</template>
<script>
  import $ from 'jquery'
  import VueLazyload from 'vue-lazyload'
  // export
  export default {
    layout: 'default',
    components: { VueLazyload },
    head() {
      return {
        title: 'Electrobotik Invasion - le 2 & 3 Ao没t 2019',
        meta: [
          { hid: 'description', name: 'description', content: 'Electrobotik Invasion Festival, le 2 & 3 Ao没t 2019, Circuit Paul Ricard - Le Castelet (83).' },
          { 'property': 'og:title', 'content': 'Electrobotik Invasion - le 2 & 3 Ao没t 2019', 'vmid': 'og:title' },
          { 'property': 'og:description', 'content': 'Electrobotik Invasion Festival, le 2 & 3 Ao没t 2019, Circuit Paul Ricard - Le Castelet (83).' },
          { 'property': 'og:image', 'content': 'images/uploads/link_share.jpg', 'vmid': 'og:image' }
        ]
      }
    },
    mounted () {	
      this.$Lazyload.$on('loaded', function ({ el, src, $parent }) {
        $(el).parent('.volet1').parent('.effect').addClass("loaded");
      });
          // Populate images from data attributes.
          var scrolled = $(window).scrollTop()
          $('#parallax').each(function(index) {
              var imageSrc = $(this).data('image-src')
              var imageHeight = $(this).data('height')
              $(this).css('background-image','url(' + imageSrc + ')')
              $(this).css('height', imageHeight)

              // Adjust the background position.
              var initY = $(this).offset().top
              var height = $(this).height()
              var diff = scrolled - initY
              var ratio = Math.round((diff / height) * 100)
              $(this).css('background-position','center ' + parseInt(-(ratio * 3.5)) + 'px')
          })

          // Attach scroll event to window. Calculate the scroll ratio of each element
          // and change the image position with that ratio.
          // https://codepen.io/lemagus/pen/RWxEYz
          $(window).scroll(function() {
            var scrolled = $(window).scrollTop()
            $('#parallax').each(function(index, element) {
              var initY = $(this).offset().top
              var height = $(this).height()
              var endY  = initY + $(this).height()

              // Check if the element is in the viewport.
              var visible = isInViewport(this)
              if(visible) {
                var diff = scrolled - initY
                var ratio = Math.round((diff / height) * 100)
                $(this).css('background-position','center ' + parseInt(-(ratio * 3.5)) + 'px')
              }
            })
          })
          function isInViewport(node) {
            // Am I visible? Height and Width are not explicitly necessary in visibility
            // detection, the bottom, right, top and left are the essential checks. If an
            // image is 0x0, it is technically not visible, so it should not be marked as
            // such. That is why either width or height have to be > 0.
            var rect = node.getBoundingClientRect()
            return (
              (rect.height > 0 || rect.width > 0) &&
              rect.bottom >= 0 &&
              rect.right >= 0 &&
              rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&
              rect.left <= (window.innerWidth || document.documentElement.clientWidth)
            )
          }      
    }
  }
</script>
